<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ„ ZiemassvÄ“tku KrustvÄrdu MÄ«kla</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;600;700&family=Nunito:wght@400;600;700&display=swap&subset=latin-ext');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #1a4a6e 0%, #0d3349 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Snowflakes animation */
        .snowflake {
            position: fixed;
            top: -10px;
            color: white;
            font-size: 1.5em;
            opacity: 0.8;
            animation: fall linear infinite;
            pointer-events: none;
            z-index: 1000;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            position: relative;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        h1 {
            font-family: 'Comfortaa', cursive;
            font-size: 2.5em;
            background: linear-gradient(135deg, #c41e3a, #8b0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: #2d5a7b;
            font-size: 1.1em;
            font-weight: 600;
        }
        
        .main-content {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .crossword-section {
            flex: 0 0 auto;
        }
        
        .clues-section {
            flex: 1;
            min-width: 320px;
            max-width: 500px;
        }
        
        .section-title {
            font-family: 'Comfortaa', cursive;
            color: #228b22;
            font-size: 1.4em;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 3px solid #228b22;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .crossword-grid {
            display: grid;
            gap: 0;
            background: #ddd;
            padding: 2px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .row {
            display: flex;
        }
        
        .cell {
            width: 32px;
            height: 32px;
            position: relative;
        }
        
        .cell.empty {
            background: transparent;
            border: none;
        }
        
        .cell.letter {
            background: #fffde7;
            border: 1px solid #ccc;
        }
        
        .cell.center {
            background: linear-gradient(135deg, #c41e3a, #a01830);
        }
        
        .cell input {
            width: 100%;
            height: 100%;
            border: none;
            background: transparent;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            font-family: 'Nunito', sans-serif;
            text-transform: uppercase;
            color: #333;
            outline: none;
            cursor: pointer;
        }
        
        .cell input:focus {
            background: #fff3cd;
            box-shadow: inset 0 0 0 2px #ffc107;
        }
        
        .cell.center input {
            color: white;
            cursor: default;
        }
        
        .cell.correct input {
            background: #d4edda !important;
            color: #155724 !important;
        }

        .cell.incorrect input {
            background: #f8d7da !important;
            color: #721c24 !important;
        }

        .cell.center.correct input {
            background: linear-gradient(135deg, #c41e3a, #8b0000) !important;
            color: white !important;
            border: 3px solid #28a745 !important;
            box-shadow: 0 0 8px rgba(40, 167, 69, 0.6);
        }

        .cell.center.incorrect input {
            background: linear-gradient(135deg, #c41e3a, #8b0000) !important;
            color: white !important;
            border: 3px solid #dc3545 !important;
            box-shadow: 0 0 8px rgba(220, 53, 69, 0.6);
        }

        .cell .num {
            position: absolute;
            top: 1px;
            left: 2px;
            font-size: 8px;
            color: #666;
            font-weight: 600;
            pointer-events: none;
            z-index: 1;
        }
        
        .spacer-row {
            height: 8px;
        }
        
        .clue-group {
            margin-bottom: 12px;
        }
        
        .clue-group-title {
            font-family: 'Comfortaa', cursive;
            color: #c41e3a;
            font-size: 1.1em;
            background: linear-gradient(90deg, #fff0f0, transparent);
            padding: 6px 12px;
            border-radius: 8px;
            margin-bottom: 6px;
            border-left: 4px solid #c41e3a;
        }
        
        .clue {
            display: flex;
            margin-bottom: 4px;
            align-items: flex-start;
            padding: 5px 8px;
            border-radius: 8px;
            transition: background 0.2s;
            cursor: pointer;
        }
        
        .clue:hover {
            background: #f0f7ff;
        }
        
        .clue.active {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
        }
        
        .clue-num {
            background: linear-gradient(135deg, #c41e3a, #a01830);
            color: white;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            margin-right: 12px;
            flex-shrink: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .clue-text {
            color: #333;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .clue-hint {
            color: #888;
            font-size: 12px;
            font-weight: 600;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 28px;
            font-size: 16px;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Nunito', sans-serif;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-check {
            background: linear-gradient(135deg, #228b22, #1a6b1a);
            color: white;
            box-shadow: 0 4px 15px rgba(34, 139, 34, 0.4);
        }
        
        .btn-check:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(34, 139, 34, 0.5);
        }
        
        .btn-clear {
            background: linear-gradient(135deg, #6c757d, #545b62);
            color: white;
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.4);
        }
        
        .btn-clear:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(108, 117, 125, 0.5);
        }
        
        .btn-hint {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #333;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
        }
        
        .btn-hint:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.5);
        }
        
        .message {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.2em;
            display: none;
        }
        
        .message.success {
            display: block;
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border: 2px solid #28a745;
        }
        
        .message.partial {
            display: block;
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            color: #856404;
            border: 2px solid #ffc107;
        }
        
        .secret-reveal {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #c41e3a, #8b0000);
            border-radius: 16px;
            color: white;
            display: none;
        }
        
        .secret-reveal.show {
            display: block;
            animation: popIn 0.5s ease;
        }
        
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .secret-reveal h2 {
            font-family: 'Comfortaa', cursive;
            font-size: 1.3em;
            margin-bottom: 10px;
        }
        
        .secret-reveal p {
            font-size: 1.5em;
            font-weight: 700;
            letter-spacing: 3px;
        }
        
        .footer {
            text-align: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px dashed #228b22;
            color: #666;
            font-size: 14px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            border-radius: 4px;
            transition: width 0.3s;
            width: 0%;
        }
        
        .progress-text {
            text-align: center;
            margin-top: 5px;
            font-size: 12px;
            color: #666;
        }
        
        @media (max-width: 900px) {
            .main-content {
                flex-direction: column;
                align-items: center;
            }

            h1 {
                font-size: 1.8em;
            }

            .cell {
                width: 26px;
                height: 26px;
            }

            .cell input {
                font-size: 13px;
            }
        }

        /* Floating Elf Button */
        .elf-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9999;
        }

        .elf-button {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #c41e3a, #8b0000);
            border: 4px solid #ffd700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            box-shadow: 0 6px 25px rgba(196, 30, 58, 0.5);
            transition: all 0.3s ease;
            animation: elfBounce 2s ease-in-out infinite;
        }

        .elf-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 35px rgba(196, 30, 58, 0.7);
        }

        .elf-button.active {
            animation: none;
            transform: rotate(360deg) scale(1.1);
        }

        @keyframes elfBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .elf-menu {
            position: absolute;
            bottom: 85px;
            right: 0;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px) scale(0.8);
            transition: all 0.3s ease;
            min-width: 180px;
        }

        .elf-menu.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }

        .elf-menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 15px;
            color: #333;
            border-bottom: 1px solid #eee;
        }

        .elf-menu-item:last-child {
            border-bottom: none;
        }

        .elf-menu-item:hover {
            background: #f8f9fa;
        }

        .elf-menu-item.check:hover {
            background: #d4edda;
            color: #155724;
        }

        .elf-menu-item.hint:hover {
            background: #fff3cd;
            color: #856404;
        }

        .elf-menu-item.clear:hover {
            background: #f8d7da;
            color: #721c24;
        }

        .elf-menu-item span.icon {
            font-size: 20px;
        }

        .elf-tooltip {
            position: absolute;
            bottom: 80px;
            right: 80px;
            background: #333;
            color: white;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-family: 'Nunito', sans-serif;
            text-align: center;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .elf-tooltip::after {
            content: '';
            position: absolute;
            right: -8px;
            bottom: 10px;
            border: 8px solid transparent;
            border-left-color: #333;
        }

        .elf-container:hover .elf-tooltip,
        .elf-tooltip.auto-show {
            opacity: 1;
            visibility: visible;
        }

        .elf-menu.show + .elf-button + .elf-tooltip {
            opacity: 0;
            visibility: hidden;
        }

        /* Toast notifications */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            padding: 15px 30px;
            border-radius: 12px;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 16px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            z-index: 10000;
            transition: all 0.4s ease;
            text-align: center;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        .toast.success {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .toast.partial {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
            color: #333;
        }

        .toast.hint {
            background: linear-gradient(135deg, #6f42c1, #e83e8c);
            color: white;
        }

        .toast.clear {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ„ ZiemassvÄ“tku KrustvÄrdu MÄ«kla ğŸ„</h1>
            <p class="subtitle">Ieraksti burtus un atklÄj noslÄ“pumaino vÄ“stÄ«jumu! âœ¨</p>
            <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
            <p class="progress-text"><span id="filled">0</span> no <span id="total">0</span> burtiem aizpildÄ«ti</p>
        </div>
        
        <div class="main-content">
            <div class="crossword-section">
                <div class="section-title">ğŸ§© KrustvÄrdu reÅ¾Ä£is</div>
                <div class="crossword-grid" id="crossword">
                    <!-- Grid will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="clues-section">
                <div class="section-title">ğŸ“ MÄ«klas</div>
                
                <div class="clue-group">
                    <div class="clue-group-title">ğŸ 1. vÄrds</div>
                    <div class="clue" data-row="0" onclick="focusRow(0)"><span class="clue-num">1</span><span class="clue-text">DebesÄ«s rÄda ceÄ¼u, bet svÄ“tkos pÄrvÄcas uz eglÄ«tes galotni <span class="clue-hint">(8)</span></span></div>
                    <div class="clue" data-row="1" onclick="focusRow(1)"><span class="clue-num">2</span><span class="clue-text">BrÅ«ni cepumi ar kanÄ“li un ingveru, bieÅ¾i veidoti kÄ sirsniÅ†as vai cilvÄ“ciÅ†i <span class="clue-hint">(10)</span></span></div>
                    <div class="clue" data-row="2" onclick="focusRow(2)"><span class="clue-num">3</span><span class="clue-text">TrÄ«s baltas bumbas viena uz otras, acis no oglÄ“m, deguns oranÅ¾s <span class="clue-hint">(10)</span></span></div>
                    <div class="clue" data-row="3" onclick="focusRow(3)"><span class="clue-num">4</span><span class="clue-text">Aukstais gadalaiks ar sniegu <span class="clue-hint">(5)</span></span></div>
                    <div class="clue" data-row="4" onclick="focusRow(4)"><span class="clue-num">5</span><span class="clue-text">Aukstums, kas koÅ¾ vaigos <span class="clue-hint">(4)</span></span></div>
                    <div class="clue" data-row="5" onclick="focusRow(5)"><span class="clue-num">6</span><span class="clue-text">TÄs saÅ†emam ZiemassvÄ“tkos zem eglÄ«tes <span class="clue-hint">(7)</span></span></div>
                    <div class="clue" data-row="6" onclick="focusRow(6)"><span class="clue-num">7</span><span class="clue-text">StÄsts par burvjiem un laimÄ«gÄm beigÄm <span class="clue-hint">(6)</span></span></div>
                    <div class="clue" data-row="7" onclick="focusRow(7)"><span class="clue-num">8</span><span class="clue-text">ÄŒetras sveces vainagÄ â€” katru svÄ“tdienu viena vairÄk deg <span class="clue-hint">(7)</span></span></div>
                    <div class="clue" data-row="8" onclick="focusRow(8)"><span class="clue-num">9</span><span class="clue-text">ÄªpaÅ¡as dienas, ko svinam decembrÄ« ar Ä£imeni <span class="clue-hint">(6)</span></span></div>
                    <div class="clue" data-row="9" onclick="focusRow(9)"><span class="clue-num">10</span><span class="clue-text">Slepenais palÄ«gs no ZiemeÄ¼pola darbnÄ«cas, gatavo dÄvanas <span class="clue-hint">(7)</span></span></div>
                    <div class="clue" data-row="10" onclick="focusRow(10)"><span class="clue-num">11</span><span class="clue-text">Balts un salds, to liek tÄ“jÄ un cepumos <span class="clue-hint">(6)</span></span></div>
                    <div class="clue" data-row="11" onclick="focusRow(11)"><span class="clue-num">12</span><span class="clue-text">ApaÄ¼i, krÄsaini eglÄ«tes rotÄjumi <span class="clue-hint">(6)</span></span></div>
                </div>
                
                <div class="clue-group">
                    <div class="clue-group-title">â° 2. vÄrds</div>
                    <div class="clue" data-row="13" onclick="focusRow(13)"><span class="clue-num">13</span><span class="clue-text">ZaÄ¼Å¡ koks, ko rotÄjam ZiemassvÄ“tkos <span class="clue-hint">(4)</span></span></div>
                    <div class="clue" data-row="14" onclick="focusRow(14)"><span class="clue-num">14</span><span class="clue-text">To dzied korÄ« ZiemassvÄ“tku koncertÄ <span class="clue-hint">(7)</span></span></div>
                    <div class="clue" data-row="15" onclick="focusRow(15)"><span class="clue-num">15</span><span class="clue-text">PozitÄ«va emocija, ko jÅ«tam svÄ“tkos <span class="clue-hint">(6)</span></span></div>
                    <div class="clue" data-row="16" onclick="focusRow(16)"><span class="clue-num">16</span><span class="clue-text">Sasalis Å«dens, uz kura var slidot <span class="clue-hint">(5)</span></span></div>
                    <div class="clue" data-row="17" onclick="focusRow(17)"><span class="clue-num">17</span><span class="clue-text">AtpÅ«tas dienas no skolas <span class="clue-hint">(10)</span></span></div>
                    <div class="clue" data-row="18" onclick="focusRow(18)"><span class="clue-num">18</span><span class="clue-text">Skaistums, greznums <span class="clue-hint">(6)</span></span></div>
                    <div class="clue" data-row="19" onclick="focusRow(19)"><span class="clue-num">19</span><span class="clue-text">Dod gaismu istabÄ, stÄv uz galda <span class="clue-hint">(5)</span></span></div>
                    <div class="clue" data-row="20" onclick="focusRow(20)"><span class="clue-num">20</span><span class="clue-text">Balts un pÅ«kains, krÄ«t no debesÄ«m <span class="clue-hint">(6)</span></span></div>
                    <div class="clue" data-row="21" onclick="focusRow(21)"><span class="clue-num">21</span><span class="clue-text">SpÄ«dÄ«ga lieta, ko karinÄm eglÄ«tÄ“ <span class="clue-hint">(4)</span></span></div>
                    <div class="clue" data-row="22" onclick="focusRow(22)"><span class="clue-num">22</span><span class="clue-text">Saldums, ko cepa mamma virtuvÄ“ <span class="clue-hint">(6)</span></span></div>
                </div>
                
                <div class="clue-group">
                    <div class="clue-group-title">ğŸ• 3. vÄrds</div>
                    <div class="clue" data-row="24" onclick="focusRow(24)"><span class="clue-num">23</span><span class="clue-text">Laba, priecÄ«ga sajÅ«ta sirdÄ« <span class="clue-hint">(5)</span></span></div>
                    <div class="clue" data-row="25" onclick="focusRow(25)"><span class="clue-num">24</span><span class="clue-text">Dienas beigas, kad saule noriet <span class="clue-hint">(6)</span></span></div>
                    <div class="clue" data-row="26" onclick="focusRow(26)"><span class="clue-num">25</span><span class="clue-text">PretÄ“js aukstam <span class="clue-hint">(5)</span></span></div>
                    <div class="clue" data-row="27" onclick="focusRow(27)"><span class="clue-num">26</span><span class="clue-text">Tur dedzina malku un sÄ“Å¾ siltumÄ <span class="clue-hint">(6)</span></span></div>
                    <div class="clue" data-row="28" onclick="focusRow(28)"><span class="clue-num">27</span><span class="clue-text">TÄ apgaismo istabu un nÄk no saules <span class="clue-hint">(6)</span></span></div>
                </div>
            </div>
        </div>
        
<div class="message" id="message"></div>
        
        <div class="footer">
            <p><strong>Padoms:</strong> NoklikÅ¡Ä·ini uz mÄ«klas, lai pÄrietu uz attiecÄ«go rindu! Izmanto rÅ«Ä·Ä«ti labajÄ stÅ«rÄ«! ğŸ„</p>
        </div>
    </div>

    <!-- Floating Elf Menu -->
    <div class="elf-container">
        <div class="elf-menu" id="elfMenu">
            <div class="elf-menu-item check" onclick="checkAnswers()">
                <span class="icon">âœ“</span>
                <span>PÄrbaudÄ«t</span>
            </div>
            <div class="elf-menu-item hint" onclick="giveHint()">
                <span class="icon">ğŸ’¡</span>
                <span>MÄjienu</span>
            </div>
            <div class="elf-menu-item clear" onclick="clearAll()">
                <span class="icon">ğŸ—‘ï¸</span>
                <span>NotÄ«rÄ«t</span>
            </div>
        </div>
        <div class="elf-button" id="elfButton" onclick="toggleElfMenu()">
            ğŸ…
        </div>
        <div class="elf-tooltip">Esmu mazo rÅ«Ä·Ä«Å¡u palÄ«gs.<br>KlikÅ¡Ä·ini uz manis!</div>
    </div>

    <!-- Toast container -->
    <div class="toast" id="toast"></div>

    <script>
        // Grid data: each row contains [word, centerLetterIndex (0-based), startColumn (0-based)]
        // centerColumn is always 6 (0-based index)
        const gridData = [
            { word: "ZVAIGZNE", centerIdx: 0, startCol: 6, num: 1 },      // Z @ pos 1
            { word: "PIPARKÅªKAS", centerIdx: 1, startCol: 5, num: 2 },   // I @ pos 2
            { word: "SNIEGAVÄªRS", centerIdx: 3, startCol: 3, num: 3 },   // E @ pos 4
            { word: "ZIEMA", centerIdx: 3, startCol: 3, num: 4 },        // M @ pos 4
            { word: "SALS", centerIdx: 1, startCol: 5, num: 5 },         // A @ pos 2
            { word: "DÄ€VANAS", centerIdx: 6, startCol: 0, num: 6 },      // S @ pos 7
            { word: "PASAKA", centerIdx: 2, startCol: 4, num: 7 },       // S @ pos 3
            { word: "ADVENTE", centerIdx: 2, startCol: 4, num: 8 },      // V @ pos 3
            { word: "SVÄ’TKI", centerIdx: 2, startCol: 4, num: 9 },       // Ä’ @ pos 3
            { word: "RÅªÄ¶ÄªTIS", centerIdx: 4, startCol: 2, num: 10 },     // T @ pos 5
            { word: "CUKURS", centerIdx: 2, startCol: 4, num: 11 },      // K @ pos 3
            { word: "BUMBAS", centerIdx: 1, startCol: 5, num: 12 },      // U @ pos 2
            { word: "SPACER", centerIdx: -1, startCol: 0, num: 0 },      // Spacer
            { word: "EGLE", centerIdx: 1, startCol: 5, num: 13 },        // G @ pos 2
            { word: "DZIESMA", centerIdx: 6, startCol: 0, num: 14 },     // A @ pos 7
            { word: "PRIEKS", centerIdx: 2, startCol: 4, num: 15 },      // I @ pos 3
            { word: "LEDUS", centerIdx: 2, startCol: 4, num: 16 },       // D @ pos 3
            { word: "BRÄªVDIENAS", centerIdx: 2, startCol: 4, num: 17 },  // Äª @ pos 3
            { word: "KOÅ UMS", centerIdx: 2, startCol: 4, num: 18 },      // Å  @ pos 3
            { word: "LAMPA", centerIdx: 1, startCol: 5, num: 19 },       // A @ pos 2
            { word: "SNIEGS", centerIdx: 1, startCol: 5, num: 20 },      // N @ pos 2
            { word: "ROTA", centerIdx: 3, startCol: 3, num: 21 },        // A @ pos 4
            { word: "CEPUMS", centerIdx: 5, startCol: 1, num: 22 },      // S @ pos 6
            { word: "SPACER", centerIdx: -1, startCol: 0, num: 0 },      // Spacer
            { word: "LAIME", centerIdx: 0, startCol: 6, num: 23 },       // L @ pos 1
            { word: "VAKARS", centerIdx: 1, startCol: 5, num: 24 },      // A @ pos 2
            { word: "SILTS", centerIdx: 1, startCol: 5, num: 25 },       // I @ pos 2
            { word: "KAMÄªNS", centerIdx: 0, startCol: 6, num: 26 },      // K @ pos 1
            { word: "GAISMA", centerIdx: 3, startCol: 3, num: 27 },      // S @ pos 4
        ];
        
        const totalCols = 15;
        const centerCol = 6;
        let allInputs = [];
        let totalLetters = 0;
        
        function createGrid() {
            const grid = document.getElementById('crossword');
            grid.innerHTML = '';
            allInputs = [];
            totalLetters = 0;
            
            gridData.forEach((rowData, rowIndex) => {
                const row = document.createElement('div');
                row.className = 'row';
                row.dataset.rowIndex = rowIndex;
                
                if (rowData.word === "SPACER") {
                    row.className = 'spacer-row';
                    grid.appendChild(row);
                    return;
                }
                
                const wordLen = rowData.word.length;
                const startCol = rowData.startCol;
                const endCol = startCol + wordLen - 1;
                
                for (let col = 0; col < totalCols; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    
                    if (col >= startCol && col <= endCol) {
                        const letterIdx = col - startCol;
                        const isCenter = (col === centerCol);
                        
                        cell.className = isCenter ? 'cell center' : 'cell letter';
                        
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.maxLength = 1;
                        input.dataset.row = rowIndex;
                        input.dataset.col = col;
                        input.dataset.letterIdx = letterIdx;
                        input.dataset.correctLetter = rowData.word[letterIdx];
                        
                        totalLetters++;
                        input.addEventListener('input', handleInput);
                        input.addEventListener('keydown', handleKeydown);
                        input.addEventListener('focus', () => highlightClue(rowIndex));
                        
                        allInputs.push(input);
                        
                        // Add number label
                        if (letterIdx === 0 && rowData.num > 0) {
                            const numSpan = document.createElement('span');
                            numSpan.className = 'num';
                            numSpan.textContent = rowData.num;
                            cell.appendChild(numSpan);
                        }
                        
                        cell.appendChild(input);
                    } else {
                        cell.className = 'cell empty';
                    }
                    
                    row.appendChild(cell);
                }
                
                grid.appendChild(row);
            });
            
            document.getElementById('total').textContent = totalLetters;
            updateProgress();
        }
        
        function handleInput(e) {
            const input = e.target;
            input.value = input.value.toUpperCase();

            // Move to next cell
            if (input.value.length === 1) {
                const allRowInputs = getRowInputs(parseInt(input.dataset.row));
                const currentIdx = allRowInputs.indexOf(input);
                if (currentIdx < allRowInputs.length - 1) {
                    allRowInputs[currentIdx + 1].focus();
                }
            }

            updateProgress();
            saveProgress();
        }

        // Save all inputs to localStorage
        function saveProgress() {
            const data = {};
            allInputs.forEach(input => {
                if (!input.readOnly) {
                    const key = `${input.dataset.row}-${input.dataset.col}`;
                    data[key] = input.value;
                }
            });
            localStorage.setItem('krustvards_progress', JSON.stringify(data));
        }

        // Load inputs from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('krustvards_progress');
            if (saved) {
                const data = JSON.parse(saved);
                allInputs.forEach(input => {
                    if (!input.readOnly) {
                        const key = `${input.dataset.row}-${input.dataset.col}`;
                        if (data[key]) {
                            input.value = data[key];
                        }
                    }
                });
                updateProgress();
            }
        }
        
        function handleKeydown(e) {
            const input = e.target;
            const allRowInputs = getRowInputs(parseInt(input.dataset.row));
            const currentIdx = allRowInputs.indexOf(input);
            
            if (e.key === 'Backspace' && input.value === '' && currentIdx > 0) {
                allRowInputs[currentIdx - 1].focus();
            } else if (e.key === 'ArrowRight' && currentIdx < allRowInputs.length - 1) {
                allRowInputs[currentIdx + 1].focus();
            } else if (e.key === 'ArrowLeft' && currentIdx > 0) {
                allRowInputs[currentIdx - 1].focus();
            } else if (e.key === 'ArrowDown') {
                focusNextRow(parseInt(input.dataset.row), 1);
            } else if (e.key === 'ArrowUp') {
                focusNextRow(parseInt(input.dataset.row), -1);
            }
        }
        
        function getRowInputs(rowIndex) {
            return allInputs.filter(inp => parseInt(inp.dataset.row) === rowIndex && !inp.readOnly);
        }
        
        function focusNextRow(currentRow, direction) {
            let nextRow = currentRow + direction;
            while (nextRow >= 0 && nextRow < gridData.length) {
                if (gridData[nextRow].word !== "SPACER") {
                    const inputs = getRowInputs(nextRow);
                    if (inputs.length > 0) {
                        inputs[0].focus();
                        return;
                    }
                }
                nextRow += direction;
            }
        }
        
        function focusRow(rowIndex) {
            const inputs = getRowInputs(rowIndex);
            if (inputs.length > 0) {
                inputs[0].focus();
            }
            highlightClue(rowIndex);
        }
        
        function highlightClue(rowIndex) {
            document.querySelectorAll('.clue').forEach(c => c.classList.remove('active'));
            const clue = document.querySelector(`.clue[data-row="${rowIndex}"]`);
            if (clue) clue.classList.add('active');
        }
        
        function updateProgress() {
            let filled = 0;
            allInputs.forEach(input => {
                if (!input.readOnly && input.value.length > 0) filled++;
            });
            document.getElementById('filled').textContent = filled;
            const percent = (filled / totalLetters) * 100;
            document.getElementById('progress').style.width = percent + '%';
        }
        
        function checkAnswers() {
            let correct = 0;
            let total = 0;

            allInputs.forEach(input => {
                if (input.readOnly) return;
                total++;

                const cell = input.parentElement;
                cell.classList.remove('correct', 'incorrect');

                if (input.value.toUpperCase() === input.dataset.correctLetter.toUpperCase()) {
                    cell.classList.add('correct');
                    correct++;
                } else if (input.value.length > 0) {
                    cell.classList.add('incorrect');
                }
            });

            if (correct === total) {
                showToast('ğŸ‰ Lieliski! Visi ' + total + ' burti ir pareizi!', 'success');
            } else {
                showToast('ğŸ“Š ' + correct + ' no ' + total + ' burtiem pareizi!', 'partial');
            }

            closeElfMenu();
        }

        function giveHint() {
            // Find first empty or incorrect input
            for (const input of allInputs) {
                if (input.readOnly) continue;
                if (input.value.toUpperCase() !== input.dataset.correctLetter.toUpperCase()) {
                    input.value = input.dataset.correctLetter;
                    input.parentElement.classList.remove('incorrect');
                    input.parentElement.classList.add('correct');
                    updateProgress();
                    saveProgress();
                    showToast('ğŸ’¡ RÅ«Ä·Ä«tis palÄ«dzÄ“ja ar vienu burtu!', 'hint');
                    closeElfMenu();
                    return;
                }
            }
            showToast('âœ¨ Visi burti jau ir aizpildÄ«ti!', 'hint');
            closeElfMenu();
        }

        function clearAll() {
            allInputs.forEach(input => {
                if (!input.readOnly) {
                    input.value = '';
                    input.parentElement.classList.remove('correct', 'incorrect');
                }
            });
            document.getElementById('message').className = 'message';
            updateProgress();
            localStorage.removeItem('krustvards_progress');
            showToast('ğŸ—‘ï¸ Viss notÄ«rÄ«ts! SÄc no jauna!', 'clear');
            closeElfMenu();
        }

        // Elf menu functions
        function toggleElfMenu() {
            const menu = document.getElementById('elfMenu');
            const button = document.getElementById('elfButton');
            menu.classList.toggle('show');
            button.classList.toggle('active');
        }

        function closeElfMenu() {
            const menu = document.getElementById('elfMenu');
            const button = document.getElementById('elfButton');
            menu.classList.remove('show');
            button.classList.remove('active');
        }

        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            const container = document.querySelector('.elf-container');
            if (!container.contains(e.target)) {
                closeElfMenu();
            }
        });

        // Toast notification
        function showToast(message, type) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type + ' show';

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Snowflakes
        function createSnowflakes() {
            const flakes = ['â„', 'â…', 'â†', 'âœ»', 'âœ¼'];
            for (let i = 0; i < 15; i++) {
                const flake = document.createElement('div');
                flake.className = 'snowflake';
                flake.textContent = flakes[Math.floor(Math.random() * flakes.length)];
                flake.style.left = Math.random() * 100 + 'vw';
                flake.style.animationDuration = (Math.random() * 3 + 5) + 's';
                flake.style.animationDelay = Math.random() * 5 + 's';
                flake.style.fontSize = (Math.random() * 1 + 0.8) + 'em';
                document.body.appendChild(flake);
            }
        }
        
        // Auto-show elf tooltip every 30 seconds
        function showElfTooltip() {
            const tooltip = document.querySelector('.elf-tooltip');
            const menu = document.getElementById('elfMenu');
            // Don't show if menu is open
            if (menu.classList.contains('show')) return;

            tooltip.classList.add('auto-show');
            setTimeout(() => {
                tooltip.classList.remove('auto-show');
            }, 7000);
        }

        // Show tooltip on load and every 20 seconds
        setTimeout(showElfTooltip, 2000);
        setInterval(showElfTooltip, 20000);

        // Initialize
        createGrid();
        loadProgress();
        createSnowflakes();
    </script>
</body>
</html>
